syntax = "proto3";

option go_package = "github.com/DataWorkbench/gproto/pkg/wspb";

package wspb;

import "github.com/mwitkow/go-proto-validators/validator.proto";
import "model.proto";

// Workspace Service
service Workspace {
    rpc ListWorkspaces(ListsRequest)       returns (ListsReply)        {}
    rpc CreateWorkspace(CreateRequest)     returns (model.EmptyStruct) {}
    rpc DeleteWorkspace(DeleteRequest)     returns (model.EmptyStruct) {}
    rpc UpdateWorkspace(UpdateRequest)     returns (model.EmptyStruct) {}
    rpc DescribeWorkspace(DescribeRequest) returns (DescribeReply)     {}
    rpc DisableWorkspace(DisableRequest)   returns (model.EmptyStruct) {}
    rpc EnableWorkspace(EnableRequest)     returns (model.EmptyStruct) {}
}

// Request parameters used to ListWorkspaces
message ListsRequest {
    string owner = 1  [ (validator.field) = { string_not_empty: true } ];
    int32  limit = 2  [ (validator.field) = { int_gt: 0, int_lt: 101 } ];
    int32  offset = 3 [ (validator.field) = { int_gt: -1 } ];
}

// Reply parameters used to ListWorkspaces
message ListsReply {
    repeated model.SpaceInfo infos = 1 [ (validator.field) = { msg_exists: false } ];
}

// Request parameters used to CreateWorkspace
message CreateRequest {
    string owner = 1 [ (validator.field) = { length_gt: 10, length_lt: 65 } ];
    string name = 2  [ (validator.field) = { length_gt: 1, length_lt: 129 } ];
    string desc = 3  [ (validator.field) = { length_lt: 1025 } ];
}

// Request parameters used to DeleteWorkspace
message DeleteRequest {
    string id = 2 [ (validator.field) = { length_eq: 20 } ];
}

// Request parameters used to UpdateWorkspace
message UpdateRequest {
    string id = 2   [ (validator.field) = { length_eq: 20 } ];
    string name = 3 [ (validator.field) = { length_lt: 129 } ];
    string desc = 4 [ (validator.field) = { length_lt: 1025 } ];
}

// Request parameters used to DescribeWorkspace
message DescribeRequest {
    string id = 2 [ (validator.field) = { length_eq: 20 } ];
}

// Reply parameters used to DescribeWorkspace
message DescribeReply {
    model.SpaceInfo info = 1;
}

// Request parameters used to DisableWorkspace
message DisableRequest {
    string id = 2 [ (validator.field) = { length_eq: 20 } ];
}

// Request parameters used to EnableWorkspace
message EnableRequest {
    string id = 2 [ (validator.field) = { length_eq: 20 } ];
}
