syntax = "proto3";

option go_package = "github.com/DataWorkbench/gproto/pkg/shpb";

package shpb;

import "github.com/mwitkow/go-proto-validators/validator.proto";
import "model.proto";


// Scheduler Service
service Scheduler {
	// Execute execute immediately a workflow task. It trigger by user on console.
	rpc ExecuteStreamFlow(ExecuteStreamFlowRequest) returns (model.EmptyStruct) {}
	
	// Submit submit a workflow task to scheduler system, It will
	// be cover if old job exists.
	rpc SubmitStreamFlow(SubmitStreamFlowRequest) returns (model.EmptyStruct) {}
	
	// Remove remove specific workflow task from scheduler system.
	rpc RemoveStreamFlow(RemoveStreamFlowRequest) returns (model.EmptyStruct) {}
}

// Request parameters used to Execute.
message ExecuteStreamFlowRequest {
	model.StreamFlowMeta meta = 1 [ (validator.field) = { } ];
}

// Request parameters used to Submit.
message SubmitStreamFlowRequest {
	model.StreamFlowMeta meta = 1 [ (validator.field) = { } ];
	int32 force_stop = 2 [ (validator.field) = { int_gt: -1, int_lt: 2 } ];
}

// Request parameters used to Remove.
message RemoveStreamFlowRequest {
	string flow_id = 1 [ (validator.field) = { length_eq: 20 } ];
	int32 force_stop = 2 [ (validator.field) = { int_gt: -1, int_lt: 2 } ];
}
