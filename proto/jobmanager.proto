syntax = "proto3";

option go_package = "github.com/DataWorkbench/gproto/pkg/jobpb";

package jobpb;

import "github.com/mwitkow/go-proto-validators/validator.proto";

// Jobmanager Service
service Jobmanager {
    rpc RunJob(RunJobRequest) returns (JobReply) {}
    rpc GetJobStatus(GetJobStatusRequest) returns (JobReply) {}
    rpc CancelJob(CancelJobRequest) returns (EmptyReply) {}
    rpc CancelAllJob(CancelAllJobRequest) returns (EmptyReply) {}
}

message JobReply {
    int32 Status = 1  [ (validator.field) = { int_gt: 0 } ];
    string Message = 2 ;
}

// EmptyReply represents no value returned
message EmptyReply {
}

message RunJobRequest {
    string ID = 1  [ (validator.field) = { length_eq: 20 } ];
    string WorkspaceID = 2 [ (validator.field) = { length_eq: 20 } ];
    int32 NodeType = 3 [ (validator.field) = { int_gt: 0 } ];
    string Depends = 4 ;
}

message GetJobStatusRequest {
    string ID = 1  [ (validator.field) = { length_eq: 20 } ];
}

message CancelJobRequest {
    string ID = 1  [ (validator.field) = { length_eq: 20 } ];
}

message CancelAllJobRequest {
    string SpaceID = 1  [ (validator.field) = { length_eq: 20 } ];
}
